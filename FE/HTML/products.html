<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products | Flash Deal</title>
    <link rel="icon" type="image/x-icon" href="../IMAGES/FlashDeal_icon-removebgcrped.png">
    <link rel="stylesheet" href="../CSS/footer.css">
    <link rel="stylesheet" href="../CSS/header.css">
    <link rel="stylesheet" href="../CSS/products_page.css">
</head>
<body>
    
 <header>
      <div id="headerChild2">
        <div id="hc21" onclick="window.location.href='../index.html'">
          <img src="../IMAGES/Flash_Deal_Logonew.png" alt="flash deal logo" />
        </div>

        <div id="hc22">
          <div id="hc221">
            <div id="cityname">
              <img src="../IMAGES/pin.png" alt="" />
            </div>

            <div id="cityform">
              <select name="city" id="city">
                <option value="volvo"></option>
                <option value="volvo">Delhi</option>
                <option value="saab">Mumbai</option>
                <option value="mercedes">Banglore</option>
                <option value="audi">Chennai</option>
              </select>
            </div>
          </div>
          <div id="hc222">
            <div id="insearch">
              <input
                type="search"
                id="searchpro"
                placeholder="Enter Products"
              />
            </div>
            <div id="insubmit">
              <img src="../IMAGES/searchwhite.png" alt="search" />
            </div>
          </div>
        </div>

        <div id="hc23">
          <div id="hc231">
            <div id="adminlogo">
             <img  src="../IMAGES/avatar.png" alt="" />
            </div>
            <div id="logdiv">
              
            </div>
          </div>
          <div id="hc232" onclick="window.location.href='../HTML/ad_post_page.html'">
            <p>Post Free Ad</p>
          </div>
        </div>
      </div>

    </header>
    <!-- <hr /> -->

<div id="cont">

  
  <h3 onclick="connect_car()">All Products & Ads</h3>
  <select name="" id="Product_dropdown" style="background-color: #f3f3f3;" onchange="chang()">
    <option value=""></option>
    <option value="Electronic Devices" >Electronic Devices</option>
    <option value="Veichle">Veichle</option>
    <option value="Furniture & Decor">Furniture & Decor</option>
    <option value="Jobs & Services">Jobs & Services</option>
  </select>
</div>
<div id="product_box">







</div>


    
<!-- --------------------------------------------------------------- -->

 <footer>
      <div id="f1" style="border-right: 0.5px solid lightgray">
        <div id="f11">
          <a href="">About Us</a>
          <a href="">Contact Us</a>
          <a href="">Flash Deal Videos</a>
          <a href="">Advertise With Us</a>
          <a href="">Blog</a>
        </div>
        <div id="f12">
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Tempore
            ipsam ratione officiis perferendis nobis ad libero, totam esse
            excepturi mollicdtia, accusamus sit laboriosam voluptas quo
            consectetur voluptatem facere eaque fugit unde. Architecto quod
            nulla minima quas ipsam eos recusandae cupiditate. Qui eveniet
            officiis ducimus veniam .
          </p>
        </div>
        <div id="f13">
          <span
            >At Flash Deal, you can buy, sell or rent anything you can think of.
          </span>
          <div onclick="window.location.href='../HTML/ad_post_page.html'">
            <p>Post Free Ad</p>
          </div>
        </div>
      </div>
      <div id="f2">
        <div id="f211">
          <div class="f2icon">
            <p>Follow Us</p>
          </div>
          <div class="f2icon">
            <img src="../IMAGES/facebook.png" alt="" />
          </div>
          <div class="f2icon">
            <img src="../IMAGES/linkedin.png" alt="" />
          </div>
          <div class="f2icon"><img src="../IMAGES/youtube.png" alt="" /></div>
          <div class="f2icon"><img src="../IMAGES/twitter.png" alt="" /></div>
          <div class="f2icon">
            <img src="../IMAGES/google-plus.png" alt="" />
          </div>
        </div>
        <nav>
          <div class="navc">
            <p>Download App</p>
          </div>
          <div class="navc">
            <img src="../IMAGES/apple-logo.png" alt="" />
          </div>
          <div class="navc">
            <img src="../IMAGES/play-store.png" alt="" />
          </div>
        </nav>
      </div>
    </footer>

</body>
</html>
<script>


 let token = localStorage.getItem("token")


function chang(){
  let ans = document.getElementById("Product_dropdown").value;
  

  if(ans==="Electronic Devices"){
      connect_mobile()
  }else if(ans==="Veichle"){
      connect_car()
  }

}





let login_Username = localStorage.getItem("lname")
  console.log(login_Username)

  let xname=""

  if(!login_Username){
    xname="Login/Register"
  }else{
    xname=login_Username
  }
        
      

  
  
  
  
let userlogo = document.querySelector("#adminlogo")

let xlogo = `<img src="./IMAGES/avatar.png" alt="" />`

if(login_Username===null){

}else{
  // xlogo=`<img src="./IMAGES/avatar.png" alt="" /> onclick="window.location.href="./HTML/User_Page.html""`
  userlogo.addEventListener("click",()=>{
  window.location.href="../HTML/User_Page.html"
})
}


let logbox = document.querySelector("#logdiv")

logbox.innerHTML=`
  <p onclick="document.getElementById('id01').style.display='block'" >${xname}</p>

`

let carAdlink = "http://localhost:8080/car/"

async function connect_car(){
  try {
    let res = await fetch(carAdlink,{
      headers:{
        "token":token
      }
    })

    let data = await res.json()
    // connect_mobile(data)
    display_car(data)
    // console.log(data)

  } catch (error) {
    alert(data.message)
  }



}

let mobileAdlink = "http://localhost:8080/mobile/"

async function connect_mobile(){


  try {
    let res = await fetch(mobileAdlink,{
      headers:{
        "token":token
      }
    })

    let data = await res.json()

    // let newArr=[...arr,...data]

    display_mobile(data)
    // console.log(newArr)


  } catch (error) {
    alert(data.message)
  }
}









 function display_car (newArr) {


     let div=document.querySelector("#product_box");
        div.innerHTML=""
        div.innerHTML+=newArr.map(e => {
            return `
            <div id="innerdiv" >
              <div id ="innerdiv_img">

                <img src="${e.img_src}" alt="">

                </div>

                <div id="innerdiv_data">
                  
                  
                  
                  <B>Title</B> : <em>${e.title}</em> 
                  <hr>
                  <B>Model</B> : <em>${e.model}</em>
                  <hr>
                  
                  <B>Year</B> : <em>${e.year}</em>
                  <hr>
                  
                  <B>Owner</B> : <em>${e.owner}</em>
                  <hr>
                  
                  <B>Price</B> : <em>${e.price}</em>
                  <hr>
                  
                  <B>Contact</B> : <em>${e.contact}</em>
                  <hr>
                  
                  
                  <button onclick="payment()" style="width: 30%"; margin-left: 20%;">Buy Now</button>
                  </div>
            

            </div>`
        }).join("");
       
    }



function display_mobile (newArr) {


    let div=document.querySelector("#product_box");
        div.innerHTML=""
        div.innerHTML+=newArr.map(e => {
            return `
           <div id="innerdiv" >
              <div id ="innerdiv_img">
                <img src="${e.img_src}" alt="">

                </div>

                <div id="innerdiv_data">
                  
                  
                  
                  <B>Title</B> : <em>${e.title}</em> 
                  <hr>
                  <B>Ram</B> : <em>${e.ram}</em>
                  <hr>
                  
                  <B>Brand</B> : <em>${e.brand}</em>
                  <hr>
                  
                  <B>Owner</B> : <em>${e.owner}</em>
                  <hr>
                  
                  <B>Price</B> : <em>${e.price}</em>
                  <hr>
                  
                  <B>Contact</B> : <em>${e.contact}</em>
                  <hr>
                  
                  
                  <button onclick=deleteit("${e._id}") style="width: 30%"; margin-left: 20%;">Buy Now</button>
                  </div>
            

            </div>`
        }).join("");

    }

function payment(){
  window.location.href="../HTML/payment-page.html"
}

</script>